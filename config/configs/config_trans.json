{
  "Tokenizer": {
    "type": "BPE",
    "load": {
      "value": true,
      "dir": "./trained_tokenizer/transformer"
    },
    "all_chars": [32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,124,160,167,169,8208,8209,8211,8212,8216,8217,8220,8221,8224,8225,8230,8240,8242,8243,8364,171,178,179,187,192,194,198,199,200,201,202,203,206,207,212,217,219,220,224,226,230,231,232,233,234,235,238,239,244,249,251,252,255,338,339,376,691,738,7496,7497,8239,8722],
    "src_tokenizer_regex": "\\d+(?:[\\.,]\\d+)* | \\w+(?:[-']\\w+)* | \\S\\S+ | \\S",
    "tgt_tokenizer_regex": "\\d+(?:[\\.,]\\d+)* | [a-zA-ZàâäéèêëîïôöùûüçÀÂÄÉÈÊËÎÏÔÖÙÛÜÇ]['’] | [a-zA-ZÀÂÆÇÈÉÊËÎÏÔÙÛÜàâæçèéêëîïôùûüÿŒœŸ]+(?:[-'’][a-zA-ZÀÂÆÇÈÉÊËÎÏÔÙÛÜàâæçèéêëîïôùûüÿŒœŸ]+)* | \\S\\S+ | \\S",
    "vocab_size": 30000,
    "special_tokens": ["<PAD>", "<BOS>", "<EOS>"],
    "sample_size": 0.2
  },
  "Dataloader": {
    "data_file": "./data/en-fr.csv",
    "allowed_chars": [32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,124,160,167,169,8208,8209,8211,8212,8216,8217,8220,8221,8224,8225,8230,8240,8242,8243,8364,171,178,179,187,192,194,198,199,200,201,202,203,206,207,212,217,219,220,224,226,230,231,232,233,234,235,238,239,244,249,251,252,255,338,339,376,691,738,7496,7497,8239,8722],
    "nrows": 1000000
  },
  "Trainer": {
    "type": "TransformerTrainer",
    "num_epoch": 10,
    "max_num_ckpt": 2,
    "enable_amp": true,
    "save_period": 1000,
    "resume": {
      "value": true
    },
    "dataloader": {
      "type": "get_transformer_dataloader",
      "params": {
        "max_seq_len": 100,
        "batch_size": 64,
        "num_workers": 4,
        "pin_memory": true,
        "train_val_test_split": [0.7, 0.15, 0.15],
        "pad_token_id": 0,
        "bos_token_id": 1,
        "eos_token_id": 2
      }
    },
    "model": {
      "type": "Transformer",
      "params": {
        "embed_dim": 512,
        "num_layers": 6,
        "num_heads": 8,
        "feedforward_dim": 2048,
        "pad_token_id": 0
      }
    },
    "optimizer": {
      "type": "AdamW",
      "params": {
        "betas": [0.9, 0.98],
        "eps": 1e-09,
        "weight_decay": 1e-2
      }
    },
    "lr_scheduler": {
      "type": "LambdaLR",
      "lambda": {
        "type": "Transformer_lambda",
        "params": {
          "embed_dim": 512,
          "warmup_steps": 4000
        }
      }
    },
    "criterion": {
      "type": "CrossEntropyLoss",
      "params": {
        "ignore_index": 0,
        "label_smoothing": 0.1
      }
    }
  },
  "Evaluator":{
    "model": {
      "type": "Transformer",
      "params": {
        "embed_dim": 512,
        "num_layers": 6,
        "num_heads": 8,
        "feedforward_dim": 2048,
        "num_tokens": 30000,
        "pad_token_id": 0
      }
    },
    "reversed_tokens_dir": "./",
    "ckpt_dir": "./checkpoints/transformer/<folder_name>/"
  }
}